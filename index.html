<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MoodSync - ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏™‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&family=Itim&display=swap');
        
        body {
            font-family: 'Sarabun', sans-serif;
            background-color: #fff5f7;
            color: #4a4a4a;
        }

        .font-itim {
            font-family: 'Itim', cursive;
        }

        .card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(255, 182, 193, 0.2);
            transition: transform 0.2s;
        }

        .card:hover {
            transform: translateY(-2px);
        }

        .btn-pink {
            background-color: #ffb6c1;
            color: white;
            transition: all 0.3s;
        }

        .btn-pink:hover {
            background-color: #ff9aa8;
            box-shadow: 0 4px 10px rgba(255, 154, 168, 0.4);
        }

        .mood-icon {
            font-size: 2rem;
            cursor: pointer;
            transition: transform 0.2s;
            filter: grayscale(100%);
        }

        .mood-icon.active {
            filter: grayscale(0%);
            transform: scale(1.2);
        }

        .hidden-panel {
            display: none;
        }

        .active-panel {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .nav-item.active {
            color: #ff8fa3;
            border-bottom: 3px solid #ff8fa3;
        }
    </style>
</head>
<body class="pb-20">

    <!-- Header -->
    <header class="bg-white p-6 shadow-sm sticky top-0 z-50">
        <div class="max-w-md mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-pink-400 font-itim">MoodSync ‚ú®</h1>
                <p class="text-xs text-gray-500">‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏•‡∏≥‡πÑ‡∏™‡πâ‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
            </div>
            <div class="flex gap-3">
                <button onclick="togglePanel('risk')" class="text-pink-400 text-xl"><i class="fas fa-heart-pulse"></i></button>
                <div class="w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center">
                    <i class="fas fa-user text-pink-400"></i>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto p-4 space-y-6">
        
        <!-- Mood Tracker Section -->
        <section id="mood-panel" class="panel active-panel space-y-4">
            <div class="card p-5">
                <h3 class="font-bold mb-4 flex items-center gap-2">
                    <i class="fas fa-face-smile text-yellow-400"></i> ‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£?
                </h3>
                <div class="flex justify-between items-center px-2">
                    <div onclick="selectMood(this, 'very_happy')" class="mood-icon text-center">ü§©<br><span class="text-[10px]">‡∏î‡∏µ‡∏°‡∏≤‡∏Å</span></div>
                    <div onclick="selectMood(this, 'happy')" class="mood-icon text-center">üòä<br><span class="text-[10px]">‡∏î‡∏µ</span></div>
                    <div onclick="selectMood(this, 'neutral')" class="mood-icon text-center">üòê<br><span class="text-[10px]">‡πÄ‡∏â‡∏¢‡πÜ</span></div>
                    <div onclick="selectMood(this, 'sad')" class="mood-icon text-center">üòî<br><span class="text-[10px]">‡πÄ‡∏®‡∏£‡πâ‡∏≤</span></div>
                    <div onclick="selectMood(this, 'tired')" class="mood-icon text-center">üò´<br><span class="text-[10px]">‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢</span></div>
                </div>
            </div>

            <!-- Food Logging Section -->
            <div class="card p-5">
                <h3 class="font-bold mb-4 flex items-center gap-2">
                    <i class="fas fa-utensils text-pink-400"></i> Smart Food Logging
                </h3>
                <div class="space-y-4">
                    <input type="text" id="food-name" placeholder="‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≤‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏°‡∏≤..." class="w-full p-3 bg-gray-50 rounded-lg border-none focus:ring-2 focus:ring-pink-200 outline-none">
                    
                    <p class="text-sm font-semibold text-gray-600">‡∏™‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏û‡∏ö:</p>
                    <div class="flex flex-wrap gap-2">
                        <label class="flex items-center gap-1 bg-blue-50 px-3 py-1 rounded-full text-xs cursor-pointer border border-blue-100">
                            <input type="checkbox" value="probiotics" class="accent-blue-400"> ‡πÇ‡∏û‡∏£‡πÑ‡∏ö‡πÇ‡∏≠‡∏ï‡∏¥‡∏Å‡∏™‡πå
                        </label>
                        <label class="flex items-center gap-1 bg-green-50 px-3 py-1 rounded-full text-xs cursor-pointer border border-green-100">
                            <input type="checkbox" value="b12" class="accent-green-400"> ‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô B6/B12
                        </label>
                        <label class="flex items-center gap-1 bg-purple-50 px-3 py-1 rounded-full text-xs cursor-pointer border border-purple-100">
                            <input type="checkbox" value="magnesium" class="accent-purple-400"> ‡πÅ‡∏°‡∏Å‡∏ô‡∏µ‡πÄ‡∏ã‡∏µ‡∏¢‡∏°
                        </label>
                        <label class="flex items-center gap-1 bg-yellow-50 px-3 py-1 rounded-full text-xs cursor-pointer border border-yellow-100">
                            <input type="checkbox" value="sugar" class="accent-yellow-400"> ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏™‡∏π‡∏á
                        </label>
                    </div>

                    <div class="pt-2 border-t border-dashed">
                        <p class="text-sm font-semibold text-gray-600 mb-2">Gut-Check (‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢):</p>
                        <select id="gut-status" class="w-full p-2 bg-pink-50 rounded-lg text-sm outline-none border-none">
                            <option value="normal">‡∏õ‡∏Å‡∏ï‡∏¥</option>
                            <option value="bloated">‡∏ó‡πâ‡∏≠‡∏á‡∏≠‡∏∑‡∏î/‡πÅ‡∏Å‡πä‡∏™‡πÄ‡∏¢‡∏≠‡∏∞</option>
                            <option value="constipation">‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢‡∏¢‡∏≤‡∏Å</option>
                        </select>
                    </div>

                    <button onclick="saveEntry()" class="w-full btn-pink py-3 rounded-xl font-bold">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                </div>
            </div>

            <!-- Suggestion Card -->
            <div id="suggestion-box" class="bg-blue-50 p-4 rounded-2xl border border-blue-100 flex gap-4 items-start">
                <div class="text-2xl">üí°</div>
                <div>
                    <h4 class="font-bold text-blue-800 text-sm">Nutritional Prescription</h4>
                    <p id="suggestion-text" class="text-xs text-blue-600 mt-1">‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∏‡∏ì‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå ‡∏•‡∏≠‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ AI ‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏°‡∏∑‡πâ‡∏≠‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏ô‡∏∞‡∏Ñ‡∏∞</p>
                </div>
            </div>
        </section>

        <!-- Insights Panel -->
        <section id="insight-panel" class="panel hidden-panel space-y-4">
            <div class="card p-5">
                <h3 class="font-bold mb-4">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏à‡∏≤‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                <canvas id="moodChart" height="200"></canvas>
                <div class="mt-4 p-3 bg-pink-50 rounded-lg text-xs leading-relaxed">
                    <p><strong>AI Insight:</strong> ‡πÄ‡∏£‡∏≤‡∏û‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ó‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏° <span class="text-pink-500 font-bold">‡πÇ‡∏û‡∏£‡πÑ‡∏ö‡πÇ‡∏≠‡∏ï‡∏¥‡∏Å‡∏™‡πå</span> ‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÄ‡∏™‡∏ñ‡∏µ‡∏¢‡∏£‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 4 ‡∏ä‡∏°. ‡∏ï‡πà‡∏≠‡∏°‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏ô‡∏±‡∏¢‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç</p>
                </div>
            </div>

            <div class="card p-5">
                <h3 class="font-bold mb-3 text-sm flex justify-between">
                    <span>Bio-Feedback Data</span>
                    <span class="text-green-500 text-[10px] uppercase font-bold">‚óè Connected</span>
                </h3>
                <div class="flex items-center justify-between">
                    <div class="text-center">
                        <p class="text-[10px] text-gray-400">Stress (HRV)</p>
                        <p class="text-lg font-bold text-pink-400">65 ms</p>
                    </div>
                    <div class="h-8 w-[1px] bg-gray-200"></div>
                    <div class="text-center">
                        <p class="text-[10px] text-gray-400">Sleep Score</p>
                        <p class="text-lg font-bold text-indigo-400">82/100</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Community Panel -->
        <section id="community-panel" class="panel hidden-panel space-y-4">
            <div class="flex gap-2 overflow-x-auto pb-2 no-scrollbar">
                <span class="bg-pink-400 text-white px-4 py-1 rounded-full text-xs whitespace-nowrap">#All</span>
                <span class="bg-white border border-pink-200 text-pink-400 px-4 py-1 rounded-full text-xs whitespace-nowrap">#MenuForAnxiety</span>
                <span class="bg-white border border-pink-200 text-pink-400 px-4 py-1 rounded-full text-xs whitespace-nowrap">#EnergyBoost</span>
            </div>
            
            <div class="card overflow-hidden">
                <div class="h-32 bg-gray-200 relative">
                    <img src="https://images.unsplash.com/photo-1547592166-23ac45744acd?auto=format&fit=crop&w=500&q=80" alt="Yogurt Bowl" class="w-full h-full object-cover">
                    <span class="absolute top-2 right-2 bg-white/80 backdrop-blur px-2 py-1 rounded text-[10px] font-bold">#GutHealth</span>
                </div>
                <div class="p-3">
                    <h4 class="font-bold text-sm">Greek Yogurt Bowl with Berries</h4>
                    <p class="text-xs text-gray-500 mt-1">‡∏°‡∏∑‡πâ‡∏≠‡πÄ‡∏ä‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏™‡∏°‡∏≠‡∏á‡πÅ‡∏à‡πà‡∏°‡πÉ‡∏™‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡∏¥‡∏ï‡∏≤‡∏°‡∏¥‡∏ô B ‡πÅ‡∏•‡∏∞‡πÇ‡∏û‡∏£‡πÑ‡∏ö‡πÇ‡∏≠‡∏ï‡∏¥‡∏Å‡∏™‡πå</p>
                    <div class="flex justify-between items-center mt-3">
                        <div class="flex items-center gap-2">
                            <div class="w-5 h-5 bg-pink-100 rounded-full"></div>
                            <span class="text-[10px]">NutriJoy</span>
                        </div>
                        <button class="text-pink-400 text-sm"><i class="far fa-heart"></i> 24</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Risk Screening Panel -->
        <section id="risk-panel" class="panel hidden-panel space-y-4">
            <div class="card p-5 bg-red-50 border border-red-100">
                <h3 class="font-bold text-red-600 flex items-center gap-2">
                    <i class="fas fa-warning"></i> ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á
                </h3>
                <p class="text-xs text-red-500 mt-2">‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏à‡∏¥‡∏ï‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (PHQ-9)</p>
                <div class="mt-4 space-y-3">
                    <p class="text-sm">‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á 2 ‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à ‡∏ó‡πâ‡∏≠‡πÅ‡∏ó‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡∏™‡∏¥‡πâ‡∏ô‡∏´‡∏ß‡∏±‡∏á‡∏ö‡πà‡∏≠‡∏¢‡πÅ‡∏Ñ‡πà‡πÑ‡∏´‡∏ô?</p>
                    <div class="grid grid-cols-2 gap-2">
                        <button class="text-xs p-2 bg-white border rounded-lg hover:bg-pink-100">‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏¢</button>
                        <button class="text-xs p-2 bg-white border rounded-lg hover:bg-pink-100">‡∏ö‡∏≤‡∏á‡∏ß‡∏±‡∏ô</button>
                        <button class="text-xs p-2 bg-white border rounded-lg hover:bg-pink-100">‡∏ö‡πà‡∏≠‡∏¢‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
                        <button class="text-xs p-2 bg-white border rounded-lg hover:bg-pink-100">‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô</button>
                    </div>
                </div>
            </div>
            <div class="p-4 text-center">
                <p class="text-[10px] text-gray-400 italic">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡∏±‡∏î‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏û‡∏ó‡∏¢‡πå</p>
            </div>
        </section>

    </main>

    <!-- Bottom Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-pink-100 py-3 px-6 flex justify-between items-center z-50">
        <button onclick="togglePanel('mood')" id="nav-mood" class="nav-item active flex flex-col items-center gap-1 transition-all">
            <i class="fas fa-home"></i>
            <span class="text-[10px]">Home</span>
        </button>
        <button onclick="togglePanel('insight')" id="nav-insight" class="nav-item flex flex-col items-center gap-1 transition-all text-gray-400">
            <i class="fas fa-chart-line"></i>
            <span class="text-[10px]">Insights</span>
        </button>
        <div class="w-12 h-12 bg-pink-400 text-white rounded-full flex items-center justify-center -mt-10 shadow-lg border-4 border-white">
            <i class="fas fa-plus"></i>
        </div>
        <button onclick="togglePanel('community')" id="nav-community" class="nav-item flex flex-col items-center gap-1 transition-all text-gray-400">
            <i class="fas fa-users"></i>
            <span class="text-[10px]">Community</span>
        </button>
        <button onclick="togglePanel('risk')" id="nav-risk" class="nav-item flex flex-col items-center gap-1 transition-all text-gray-400">
            <i class="fas fa-shield-heart"></i>
            <span class="text-[10px]">Risk Check</span>
        </button>
    </nav>

    <!-- Floating Toast Message -->
    <div id="toast" class="fixed bottom-24 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-6 py-2 rounded-full text-xs opacity-0 transition-opacity pointer-events-none">
        ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!
    </div>

    <script>
        let currentMood = null;

        function selectMood(element, mood) {
            document.querySelectorAll('.mood-icon').forEach(icon => icon.classList.remove('active'));
            element.classList.add('active');
            currentMood = mood;
            
            // AI Prescription Logic
            const suggestionText = document.getElementById('suggestion-text');
            const suggestionBox = document.getElementById('suggestion-box');
            
            if (mood === 'tired') {
                suggestionText.innerText = "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏î‡∏±‡∏ä‡∏ô‡∏µ‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏ï‡πà‡∏≥ (Low GI) ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ç‡πâ‡∏≤‡∏ß‡∏Å‡∏•‡πâ‡∏≠‡∏á ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏±‡∏•‡∏°‡∏≠‡∏ô‡∏î‡πå ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡πà‡∏∞";
                suggestionBox.className = "bg-orange-50 p-4 rounded-2xl border border-orange-100 flex gap-4 items-start";
            } else if (mood === 'sad') {
                suggestionText.innerText = "‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥: ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÅ‡∏°‡∏Å‡∏ô‡∏µ‡πÄ‡∏ã‡∏µ‡∏¢‡∏°‡πÅ‡∏•‡∏∞ B12 ‡πÄ‡∏ä‡πà‡∏ô ‡∏î‡∏≤‡∏£‡πå‡∏Å‡∏ä‡πá‡∏≠‡∏Å‡πÇ‡∏Å‡πÅ‡∏•‡∏ï ‡∏´‡∏£‡∏∑‡∏≠ ‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏´‡∏≠‡∏° ‡∏ä‡πà‡∏ß‡∏¢‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏î‡∏∏‡∏•‡∏™‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ó‡∏Ñ‡πà‡∏∞";
                suggestionBox.className = "bg-pink-50 p-4 rounded-2xl border border-pink-100 flex gap-4 items-start";
            } else {
                suggestionText.innerText = "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏î‡∏µ! ‡∏≠‡∏¢‡πà‡∏≤‡∏•‡∏∑‡∏°‡∏ó‡∏≤‡∏ô‡πÇ‡∏û‡∏£‡πÑ‡∏ö‡πÇ‡∏≠‡∏ï‡∏¥‡∏Å‡∏™‡πå‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏Å‡∏©‡∏≤ Gut-Brain Axis ‡πÉ‡∏´‡πâ‡πÅ‡∏Ç‡πá‡∏á‡πÅ‡∏£‡∏á‡∏ô‡∏∞‡∏Ñ‡∏∞";
                suggestionBox.className = "bg-green-50 p-4 rounded-2xl border border-green-100 flex gap-4 items-start";
            }
        }

        function togglePanel(panelName) {
            document.querySelectorAll('.panel').forEach(p => {
                p.classList.remove('active-panel');
                p.classList.add('hidden-panel');
            });
            document.getElementById(panelName + '-panel').classList.remove('hidden-panel');
            document.getElementById(panelName + '-panel').classList.add('active-panel');

            // Nav update
            document.querySelectorAll('.nav-item').forEach(n => {
                n.classList.remove('active');
                n.classList.add('text-gray-400');
            });
            const activeNav = document.getElementById('nav-' + panelName);
            if(activeNav) {
                activeNav.classList.add('active');
                activeNav.classList.remove('text-gray-400');
            }

            if(panelName === 'insight') {
                renderChart();
            }
        }

        function saveEntry() {
            const food = document.getElementById('food-name').value;
            if (!food && !currentMood) {
                alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞");
                return;
            }

            const toast = document.getElementById('toast');
            toast.style.opacity = '1';
            setTimeout(() => { toast.style.opacity = '0'; }, 2000);
            
            // Clear inputs
            document.getElementById('food-name').value = "";
            document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
        }

        function renderChart() {
            const ctx = document.getElementById('moodChart').getContext('2d');
            
            // Cleanup previous chart instance if exists
            if (window.myChart) window.myChart.destroy();

            window.myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['‡∏à.', '‡∏≠.', '‡∏û.', '‡∏û‡∏§.', '‡∏®.', '‡∏™.', '‡∏≠‡∏≤.'],
                    datasets: [{
                        label: '‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç (Food-Mood Index)',
                        data: [65, 59, 80, 81, 56, 95, 88],
                        borderColor: '#ff8fa3',
                        backgroundColor: 'rgba(255, 143, 163, 0.1)',
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { beginAtZero: true, display: false },
                        x: { grid: { display: false } }
                    }
                }
            });
        }

        // Initialize with Home
        window.onload = () => {
            console.log("MoodSync Ready!");
        };
    </script>
</body>
</html>
